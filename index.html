<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lost & Found - Pimpri Community</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        *{box-sizing:border-box}body{font-family:'Inter',-apple-system,sans-serif;overscroll-behavior:none}.glass{background:rgba(255,255,255,0.1);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,0.2)}.neon-glow{box-shadow:0 0 20px rgba(168,85,247,0.4)}.floating-item{animation:float 6s ease-in-out infinite}@keyframes float{0%,100%{transform:translateY(0px)}50%{transform:translateY(-20px)}}.field-focus{transition:all 0.3s ease}.field-focus:focus{transform:scale(1.02);box-shadow:0 10px 30px rgba(168,85,247,0.3)}.nav-btn{padding:8px 16px;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);border-radius:12px;color:white;font-weight:500;transition:all 0.3s;cursor:pointer}.nav-btn.active,.nav-btn:hover{background:rgba(255,255,255,0.2);box-shadow:0 4px 12px rgba(168,85,247,0.3)}.upload-area{border:2px dashed rgba(255,255,255,0.4);transition:all 0.3s}.upload-area.dragover{border-color:#a855f7;background:rgba(168,85,247,0.1)}
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800 h-screen overflow-hidden text-white">
    <canvas id="three-canvas" class="fixed inset-0 z-0 pointer-events-none"></canvas>
    <div class="fixed inset-0 z-10 pointer-events-none">
        <div class="floating-item absolute left-10 top-1/4 w-12 h-12 bg-yellow-400 rounded-full shadow-lg neon-glow" style="animation-delay:0s"></div>
        <div class="floating-item absolute right-20 top-1/3 w-20 h-10 bg-orange-600 rounded-lg shadow-lg" style="animation-delay:2s"></div>
        <div class="floating-item absolute left-1/4 bottom-1/4 w-16 h-16 bg-gray-800 rounded-full shadow-lg neon-glow" style="animation-delay:4s"></div>
    </div>
    
    <div class="relative z-20 h-screen flex flex-col">
        <!-- NAVIGATION HEADER -->
        <header class="px-4 py-2 border-b border-white/10">
            <nav>
                <button id="btn-home" class="nav-btn active">üè† Home</button>
                <button id="btn-report" class="nav-btn">üìã Report</button>
                <button id="btn-search" class="nav-btn">üîç Search</button>
            </nav>
        </header>

        <!-- MAIN CONTENT -->
        <main id="app-root" class="flex-1 flex items-center justify-center px-4 pt-1 pb-2 overflow-hidden">
            <!-- HOME SCREEN (Default) -->
            <div id="home-screen" class="w-full max-w-6xl mx-auto h-[90vh] grid md:grid-cols-2 gap-4">
                <div class="glass rounded-3xl p-4 shadow-2xl neon-glow h-full flex flex-col overflow-hidden md:col-span-2 lg:col-span-1 lg:col-start-2">
                    <div class="flex flex-wrap gap-1 mb-2 pb-1">
                        <button class="flex-1 min-w-[55px] py-1 px-2 glass rounded-lg font-semibold hover:bg-white/20 text-xs active:bg-white/30 active:ring-2 active:ring-purple-400" onclick="filterReports('all')">All <span id="allCount">0</span></button>
                        <button class="flex-1 min-w-[45px] py-1 px-1.5 glass rounded-lg font-semibold text-red-300 hover:bg-red-500/20 text-xs" onclick="filterReports('lost')">Lost</button>
                        <button class="flex-1 min-w-[45px] py-1 px-1.5 glass rounded-lg font-semibold text-green-300 hover:bg-green-500/20 text-xs" onclick="filterReports('found')">Found</button>
                    </div>
                    <div id="reportsList" class="flex-1 overflow-y-auto pr-0.5 space-y-1 scrollbar-thin" style="height: calc(90vh - 80px)">
                        <div class="text-center py-6 opacity-40 flex flex-col items-center">
                            <svg class="w-8 h-8 mb-1 opacity-30" fill="currentColor" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zM6 4h7v5h5v11H6V4zm9 13v-3h3v-2h-3V9h-2v5h-3v2h3v3h2z"/></svg>
                            <p class="text-xs">Click Report to add items</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- REPORT SCREEN -->
            <div id="report-screen" class="w-full max-w-6xl mx-auto h-[90vh] grid md:grid-cols-2 gap-4 hidden">
                <div class="glass rounded-3xl p-4 shadow-2xl neon-glow h-full flex flex-col md:col-span-2">
                    <div class="flex items-center gap-1.5 mb-2 pb-1">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M21 15v-4a2 2 0 0 0-2-2h-2V7a6 6 0 0 0-6-6H9a6 6 0 0 0-6 6v4H3a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h2v2a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3v-2h2a2 2 0 0 0 2-2v-4h-2zm-8 6H8v-2h5v2zm6-8H4v-2h17v2z"/></svg>
                        <h2 class="text-lg font-bold">Report Item</h2>
                    </div>
                    
                    <form id="reportFormFields" class="flex-1 flex flex-col justify-between space-y-1 overflow-hidden">
                        <div class="space-y-1">
                            <label class="block text-xs font-semibold text-white/90">Item Name</label>
                            <input type="text" id="itemName" required class="w-full glass rounded-lg px-2 py-1.5 text-sm placeholder-white/60 field-focus outline-none h-8">
                        </div>
                        <div class="grid grid-cols-2 gap-1">
                            <label class="flex items-center gap-1 cursor-pointer p-2 glass rounded-lg hover:bg-white/10 text-xs">
                                <input type="radio" name="type" value="lost" id="lost" required class="w-3.5 h-3.5 text-red-400">
                                <span class="font-semibold text-red-300">Lost</span>
                            </label>
                            <label class="flex items-center gap-1 cursor-pointer p-2 glass rounded-lg hover:bg-white/10 text-xs">
                                <input type="radio" name="type" value="found" id="found" required class="w-3.5 h-3.5 text-green-400">
                                <span class="font-semibold text-green-300">Found</span>
                            </label>
                        </div>
                        <div>
                            <label class="block text-xs font-semibold text-white/90 mb-0.5">Description</label>
                            <textarea id="description" rows="2" required class="w-full glass rounded-lg px-2 py-1.5 resize-none field-focus outline-none placeholder-white/60 text-xs h-12"></textarea>
                        </div>
                        <div>
                            <label class="block text-xs font-semibold text-white/90 mb-0.5">Location</label>
                            <div class="relative">
                                <svg class="absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 text-purple-300" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
                                <input type="text" id="location" required class="w-full pl-7 pr-2 py-1.5 glass rounded-lg field-focus outline-none placeholder-white/60 text-xs h-8" placeholder="Pimpri">
                            </div>
                        </div>
                        <div>
                            <label class="block text-xs font-semibold text-white/90 mb-0.5">Contact</label>
                            <input type="text" id="contact" required class="w-full glass rounded-lg px-2 py-1.5 field-focus outline-none placeholder-white/60 text-xs h-8" placeholder="Email/Phone">
                        </div>
                        
                        <!-- COMPACT FILE UPLOAD -->
                        <div>
                            <label class="block text-xs font-semibold text-white/90 mb-1">Photo</label>
                            <div class="upload-area glass rounded-lg p-3 text-center cursor-pointer hover:bg-white/10 transition-all text-xs" id="uploadArea">
                                <svg class="w-6 h-6 mx-auto mb-1 text-white/60" fill="currentColor" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zM6 4h7v5h5v11H6V4zm9 13v-3h3v-2h-3V9h-2v5h-3v2h3v3h2z"/></svg>
                                <input type="file" id="imageUpload" accept="image/*" class="hidden">
                                <div>Click or drag photo</div>
                            </div>
                            <div id="imagePreview" class="mt-1.5 hidden p-1.5 glass rounded-md border-2 border-green-400/50">
                                <div class="relative">
                                    <img id="previewImg" class="w-full h-14 object-cover rounded" src="">
                                    <button type="button" id="clearImageBtn" class="absolute top-0 right-0 w-5 h-5 bg-red-500/90 hover:bg-red-600 rounded-full flex items-center justify-center text-white text-[10px]">‚úï</button>
                                </div>
                            </div>
                        </div>
                    </form>

                    <!-- COMPACT SUBMIT BUTTONS -->
                    <div id="submitReportSection" class="hidden mt-2 pt-2 border-t border-white/20">
                        <div class="text-center mb-2">
                            <div class="w-10 h-10 bg-green-500/20 border-2 border-green-400/50 rounded-lg flex items-center justify-center mx-auto mb-1">
                                <svg class="w-5 h-5 text-green-400" fill="currentColor" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
                            </div>
                            <h3 class="text-sm font-bold text-green-300">Ready!</h3>
                        </div>
                        <button id="finalSubmitBtn" class="w-full bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-xs font-bold py-2 px-4 rounded-lg shadow-lg hover:shadow-emerald-500/50 hover:scale-[1.02] active:scale-[0.98] transition-all neon-glow flex items-center justify-center gap-1 h-9">
                            <span id="finalSubmitText">‚úÖ Submit</span>
                            <div id="finalLoadingSpinner" class="hidden w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                        </button>
                    </div>
                    <button id="fillFormBtn" class="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-xs font-bold py-2 px-4 rounded-lg shadow-lg hover:shadow-purple-500/50 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-1 neon-glow mt-auto h-9">
                        üìù Fill Form
                    </button>
                </div>
            </div>
        </main>

        <div class="text-center py-1 text-xs opacity-60 border-t border-white/10 px-2">üèòÔ∏è Pimpri Community ¬© 2026</div>
    </div>

    <script>
        let reports=JSON.parse(localStorage.getItem('lostFoundReports'))||[];let currentFilter='all';let imageFile=null;let formFilled=!1;
        
        function initThreeJS(){const e=document.getElementById('three-canvas');const t=new THREE.Scene();const n=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);const r=new THREE.WebGLRenderer({canvas:e,alpha:!0});r.setSize(window.innerWidth,window.innerHeight);r.setClearColor(0x000000,0);const a=new THREE.BufferGeometry();const o=100;const i=new Float32Array(o*3);for(let s=0;s<o*3;s++){i[s]=(Math.random()-.5)*15}a.setAttribute('position',new THREE.BufferAttribute(i,3));const l=new THREE.PointsMaterial({color:0xa855f7,size:0.012});const c=new THREE.Points(a,l);t.add(c);n.position.z=4;function m(){requestAnimationFrame(m);c.rotation.y+=.002;r.render(t,n)}m()}
        
        // Navigation
        function showScreen(screen){document.querySelectorAll('[id$="-screen"]').forEach(e=>e.classList.add('hidden'));document.getElementById(screen+'-screen').classList.remove('hidden');document.querySelectorAll('.nav-btn').forEach(e=>e.classList.remove('active'));document.getElementById('btn-'+screen).classList.add('active')}
        document.getElementById('btn-home').onclick=()=>showScreen('home');
        document.getElementById('btn-report').onclick=()=>{showScreen('report');document.getElementById('itemName').focus();formFilled=!1;document.getElementById('submitReportSection').classList.add('hidden');document.getElementById('fillFormBtn').classList.remove('hidden')}
        document.getElementById('btn-search').onclick=()=>showScreen('search');
        
        // File Upload
        const uploadArea=document.getElementById('uploadArea');
        const fileInput=document.getElementById('imageUpload');
        const preview=document.getElementById('imagePreview');
        const previewImg=document.getElementById('previewImg');
        const clearBtn=document.getElementById('clearImageBtn');
        
        uploadArea.onclick=()=>fileInput.click();
        ['dragenter','dragover','dragleave','drop'].forEach(eventName=>{uploadArea.addEventListener(eventName,e=>{e.preventDefault();e.stopPropagation();if(eventName==='dragenter'||eventName==='dragover')uploadArea.classList.add('dragover');else if(eventName==='dragleave')uploadArea.classList.remove('dragover');else if(eventName==='drop'){uploadArea.classList.remove('dragover');handleFiles(e.dataTransfer.files)}})});
        fileInput.onchange=e=>handleFiles(e.target.files);
        
        function handleFiles(files){
            const file=files[0];
            if(file&&file.type.startsWith('image/')&&file.size<5*1024*1024){
                imageFile=file;
                previewImg.src=URL.createObjectURL(file);
                preview.classList.remove('hidden');
            }
        }
        clearBtn.onclick=()=>{
            imageFile=null;
            fileInput.value='';
            preview.classList.add('hidden');
        }
        
        // Form Flow
        document.getElementById('fillFormBtn').onclick=()=>{
            formFilled=!0;
            document.getElementById('fillFormBtn').classList.add('hidden');
            document.getElementById('submitReportSection').classList.remove('hidden');
        };
        document.getElementById('finalSubmitBtn').onclick=submitReport;
        
        async function submitReport(){
            const e=document.getElementById('finalSubmitBtn');
            const t=document.getElementById('finalSubmitText');
            const n=document.getElementById('finalLoadingSpinner');
            e.disabled=!0;t.classList.add('hidden');n.classList.remove('hidden');
            
            const r={
                id:Date.now(),
                itemName:document.getElementById('itemName').value,
                type:document.querySelector('input[name="type"]:checked').value,
                description:document.getElementById('description').value,
                location:document.getElementById('location').value,
                contact:document.getElementById('contact').value,
                image:imageFile?URL.createObjectURL(imageFile):null,
                timestamp:new Date().toLocaleString('en-IN',{timeZone:'Asia/Kolkata',weekday:'short',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'}),
                maskedContact:document.getElementById('contact').value.includes('@')?document.getElementById('contact').value:'****'+document.getElementById('contact').value.slice(-4)
            };
            
            await new Promise(resolve=>setTimeout(resolve,1200));
            reports.unshift(r);localStorage.setItem('lostFoundReports',JSON.stringify(reports));renderReports();
            
            setTimeout(()=>{
                showScreen('home');
                document.getElementById('reportFormFields').reset();
                preview.classList.add('hidden');
                imageFile=null;
                fileInput.value='';
                e.disabled=!1;t.classList.remove('hidden');n.classList.add('hidden');
                formFilled=!1;
                document.getElementById('submitReportSection').classList.add('hidden');
                document.getElementById('fillFormBtn').classList.remove('hidden');
            },1500);
        }
        
        function renderReports(){
            const e=document.getElementById('reportsList');
            const t=document.getElementById('allCount');
            let n=reports;
            if(currentFilter!=='all')n=reports.filter(e=>e.type===currentFilter);
            t.textContent=reports.length;
            if(n.length===0){
                e.innerHTML='<div class="text-center py-6 opacity-40 flex flex-col items-center"><svg class="w-8 h-8 mb-1 opacity-30" fill="currentColor" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zM6 4h7v5h5v11H6V4zm9 13v-3h3v-2h-3V9h-2v5h-3v2h3v3h2z"/></svg><p class="text-xs">No reports yet</p></div>';return
            }
            e.innerHTML=n.map(r=>`<div class="glass rounded-lg p-2 hover:bg-white/20 hover:scale-[1.02] transition-all group"><div class="flex items-start gap-1.5"><div class="w-12 h-12 rounded-md overflow-hidden glass flex-shrink-0 group-hover:scale-105 transition-transform">${r.image?`<img src="${r.image}" alt="${r.itemName}" class="w-full h-full object-cover">`:`<div class="w-full h-full bg-gradient-to-br from-purple-400/30 to-pink-400/30 flex items-center justify-center"><svg class="w-5 h-5 text-white/40" fill="currentColor" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zM6 4h7v5h5v11H6V4zm9 13v-3h3v-2h-3V9h-2v5h-3v2h3v3h2z"/></svg></div>`}</div><div class="flex-1 min-w-0"><div class="flex items-center gap-1 mb-1"><span class="px-1.5 py-0.5 rounded-full text-[10px] font-bold ${r.type==='lost'?'bg-red-500/40 text-red-200':'bg-green-500/40 text-green-200'}">${r.type.toUpperCase()}</span><span class="text-[10px] opacity-50">${r.timestamp}</span></div><h3 class="text-xs font-bold mb-0.5 truncate">${r.itemName}</h3><p class="opacity-75 text-[11px] mb-1 line-clamp-1">${r.description}</p><div class="flex gap-1.5 text-[10px] opacity-60"><div class="flex items-center gap-0.5"><svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>${r.location}</div><div class="flex items-center gap-0.5">${r.contact.includes('@')?'<svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>':'<svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg>'}${r.maskedContact}</div></div></div></div></div>`).join('')
        }
        
        function filterReports(e){
            currentFilter=e;
            renderReports();
            document.querySelectorAll('[onclick="filterReports()"]').forEach(t=>t.classList.remove('bg-white/30','ring-2','ring-purple-400'));
            event.target.classList.add('bg-white/30','ring-2','ring-purple-400')
        }
        
        document.addEventListener('DOMContentLoaded',()=>{
            initThreeJS();
            renderReports();
            document.querySelectorAll('.field-focus').forEach(e=>{
                e.addEventListener('focus',function(){this.closest('div').classList.add('neon-glow')});
                e.addEventListener('blur',function(){this.closest('div').classList.remove('neon-glow')})
            });
        });
    </script>
</body>
</html>
